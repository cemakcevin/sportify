{"ast":null,"code":"var _jsxFileName = \"/Users/cemakcevin/Desktop/Cem/Code/BrainStation/cem-akcevin-capstone/sportify/client/src/pages/UserPage/UserPage.js\";\nimport './UserPage.scss';\nimport React from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport io from 'socket.io-client';\nimport Avatar from '../../components/Avatar/Avatar';\nimport TeamCard from '../../components/TeamCard/TeamCard';\nimport TeamDetails from '../../components/TeamDetails/TeamDetails';\nimport EventScore from '../../components/EventScore/EventScore';\nimport NewsArticle from '../../components/NewsArticle/NewsArticle';\nimport ProfileImage from '../../components/ProfileImage/ProfileImage';\nimport IsFriend from '../../components/IsFriend/IsFriend';\nimport FeedForm from '../../components/FeedForm/FeedForm';\nimport FeedCard from '../../components/FeedCard/FeedCard';\nimport lockIcon from '../../assets/icons/lock-icon.png';\nimport homeIcon from '../../assets/icons/home-icon.png';\nimport locationIcon from '../../assets/icons/location-icon.png';\nimport timeDifference from '../../functions/timeDifference';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API__KEY = \"dd7ed4159ce8b1df6d8cbadaa67c7cdf\";\nconst localUrl = \"http://localhost:8686\";\nlet socket;\n\nclass UserPage extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      index: 0,\n      favouriteTeams: [],\n      selectedTeam: null,\n      detailsEnabled: false,\n      pastEvents: [],\n      articles: [],\n      currentUser: {},\n      profileInfo: {},\n      currentIsProfile: null,\n      friends: [],\n      requests: [],\n      isFriend: null,\n      isRequestSent: false,\n      isRequestReceived: false,\n      feed: [],\n      feedComments: []\n    };\n\n    this.taskDisplayTeam = teamId => {\n      axios.get(\"https://www.thesportsdb.com/api/v1/json/40130162/lookupteam.php?id=\" + teamId).then(response => {\n        const selectedTeam = response.data.teams[0];\n        this.setState({\n          selectedTeam: selectedTeam,\n          detailsEnabled: true\n        });\n      });\n    };\n\n    this.taskEndDisplayTeam = () => {\n      this.setState({\n        detailsEnabled: false\n      });\n    };\n\n    this.taskUpdateFavourites = () => {\n      const token = sessionStorage.getItem(\"token\");\n      axios.get(localUrl + \"/favourites\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(response => {\n        if (response.data) {\n          this.setState({\n            favouriteTeams: response.data\n          });\n        } else {\n          this.setState({\n            favouriteTeams: []\n          });\n        }\n      });\n    };\n\n    this.taskSendFriendRequest = () => {\n      const {\n        profileInfo\n      } = this.state;\n      const token = sessionStorage.getItem(\"token\");\n      const userId = profileInfo.userId;\n      axios.post(localUrl + '/requests', {\n        userId\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(_response => {\n        this.setState({\n          isRequestSent: true\n        }, () => {\n          socket.emit(\"friendRequest\");\n        });\n      });\n    };\n\n    this.taskAcceptFriendRequest = () => {\n      const {\n        profileInfo\n      } = this.state;\n      const token = sessionStorage.getItem(\"token\");\n      const requestorId = profileInfo.userId;\n      axios.post(localUrl + '/requests/acceptRequest', {\n        requestorId\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(_response => {\n        return axios.all([axios.get(localUrl + \"/friends/\" + requestorId, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }), axios.get(localUrl + \"/requests/\" + requestorId, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        })]).then(axios.spread((friendsResponse, requestResponse) => {\n          this.setState({\n            isFriend: true,\n            friends: friendsResponse.data,\n            requests: requestResponse.data\n          }, () => {\n            socket.emit(\"friendAccept\");\n          });\n        }));\n      });\n    };\n\n    this.taskAddPost = event => {\n      event.preventDefault();\n      const {\n        profileInfo\n      } = this.state;\n      const token = sessionStorage.getItem(\"token\");\n      const commentText = event.target.commentText.value;\n      const contentType = \"comment\";\n      const userId = profileInfo.userId;\n      const commentData = {\n        userId,\n        commentText,\n        contentType\n      };\n      axios.post(localUrl + \"/feed\", commentData, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(response => {\n        this.setState({\n          feed: response.data\n        }, () => {\n          event.target.reset();\n          socket.emit(\"feedPost\", {\n            feed: response.data\n          });\n        });\n      });\n    };\n\n    this.taskAddCommentToPost = event => {\n      event.preventDefault();\n      const {\n        profileInfo\n      } = this.state;\n      const token = sessionStorage.getItem(\"token\");\n      const userId = profileInfo.userId;\n      const commentText = event.target.commentText.value;\n      const contentId = event.target.contentId.value;\n      const contentType = event.target.contentType.value;\n      const receiverId = event.target.receiverId.value;\n      const feedCommentData = {\n        contentId,\n        contentType,\n        commentText,\n        receiverId\n      };\n      axios.post(localUrl + \"/comments\", feedCommentData, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(_response => {\n        return axios.get(localUrl + \"/comments/feedComments/\" + userId, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n      }).then(response => {\n        this.setState({\n          feedComments: response.data\n        }, () => {\n          event.target.reset();\n          socket.emit(\"feedPostComment\", {\n            feedComments: response.data\n          });\n        });\n      });\n    };\n\n    this.taskTakeToGamePage = idEvent => {\n      this.props.history.push('/game/' + idEvent);\n    };\n  }\n\n  componentDidMount(prevProps, _prevState) {\n    const url = this.props.match.url;\n    const previousUrl = prevProps && prevProps.match.url;\n\n    if (url !== previousUrl) {\n      this.props.taskUpdateUrl(this.props.match.url);\n    }\n\n    const token = sessionStorage.getItem(\"token\");\n    let userId = this.props.match.params.userId;\n    socket = io.connect(localUrl);\n\n    if (!userId) {\n      socket.on(\"feedPostUpdate\", () => {\n        axios.get(localUrl + \"/feed/currentUser\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }).then(response => {\n          this.setState({\n            feed: response.data\n          });\n        });\n      });\n      socket.on(\"feedPostCommentUpdate\", () => {\n        axios.get(localUrl + \"/comments/feedComments/currentUser\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }).then(response => {\n          this.setState({\n            feedComments: response.data\n          });\n        });\n      });\n      socket.on(\"friendRequestUpdate\", () => {\n        axios.get(localUrl + \"/requests\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }).then(response => {\n          this.setState({\n            requests: response.data\n          });\n        });\n      });\n      socket.off(\"friendAcceptUpdate\");\n      axios.get(localUrl + \"/users\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(response => {\n        userId = response.data.userId;\n        console.log(userId);\n        this.setState({\n          currentUser: response.data,\n          profileInfo: response.data,\n          currentIsProfile: true\n        });\n        return axios.all([axios.get(localUrl + \"/favourites\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }), axios.get(localUrl + \"/friends\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }), axios.get(localUrl + \"/requests\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }), axios.get(localUrl + \"/feed/currentUser\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }), axios.get(localUrl + \"/comments/feedComments/currentUser\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        })]);\n      }).then(axios.spread((favouritesResponse, friendsResponse, requestsResponse, feedResponse, feedCommentsResponse) => {\n        if (favouritesResponse.data) {\n          this.setState({\n            favouriteTeams: favouritesResponse.data,\n            friends: friendsResponse.data,\n            requests: requestsResponse.data,\n            feed: feedResponse.data,\n            feedComments: feedCommentsResponse.data,\n            isFriend: true\n          });\n        } else {\n          this.setState({\n            friends: friendsResponse.data,\n            requests: requestsResponse.data,\n            feed: feedResponse.data,\n            feedComments: feedCommentsResponse.data,\n            isFriend: true\n          }, () => console.log(\"yess\"));\n        }\n      })).catch(error => {\n        console.log(error);\n      });\n    } else {\n      socket.on(\"feedPostUpdate\", () => {\n        axios.get(localUrl + \"/feed/\" + userId, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }).then(response => {\n          this.setState({\n            feed: response.data\n          });\n        });\n      });\n      socket.on(\"feedPostCommentUpdate\", () => {\n        axios.get(localUrl + \"/comments/feedComments/\" + userId, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }).then(response => {\n          this.setState({\n            feedComments: response.data\n          });\n        });\n      });\n      socket.on(\"friendAcceptUpdate\", () => {\n        console.log(\"it is working\");\n        axios.all([axios.get(localUrl + \"/friends/isFriend/\" + userId, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }), axios.get(localUrl + \"/friends/\" + userId, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        })]).then(axios.spread((isFriendResponse, friendsResponse) => {\n          console.log(isFriendResponse.data, friendsResponse.data);\n          this.setState({\n            isFriend: isFriendResponse.data,\n            friends: friendsResponse.data\n          });\n        }));\n      });\n      socket.off(\"friendRequestUpdate\");\n      axios.all([axios.get(localUrl + \"/favourites/user/\" + userId, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }), axios.get(localUrl + \"/users/\" + userId, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }), axios.get(localUrl + \"/users\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }), axios.get(localUrl + \"/friends/\" + userId, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }), axios.get(localUrl + \"/feed/\" + userId, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }), axios.get(localUrl + \"/comments/feedComments/\" + userId, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      })]).then(axios.spread((favouritesResponse, profileResponse, currentUserResponse, friendsResponse, feedResponse, feedCommentsResponse) => {\n        if (favouritesResponse.data) {\n          this.setState({\n            favouriteTeams: favouritesResponse.data,\n            currentUser: currentUserResponse.data,\n            profileInfo: profileResponse.data,\n            currentIsProfile: false,\n            friends: friendsResponse.data,\n            feed: feedResponse.data,\n            feedComments: feedCommentsResponse.data\n          });\n        } else {\n          this.setState({\n            currentUser: currentUserResponse.data,\n            profileInfo: profileResponse.data,\n            currentIsProfile: false,\n            friends: friendsResponse.data,\n            feed: feedResponse.data,\n            feedComments: feedCommentsResponse.data\n          });\n        }\n\n        return axios.all([axios.get(localUrl + \"/friends/isFriend/\" + userId, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }), axios.get(localUrl + \"/requests/isRequestSent/\" + userId, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }), axios.get(localUrl + \"/requests/isRequestReceived/\" + userId, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        })]);\n      })).then(axios.spread((isFriendResponse, isSentResponse, isRecievedResponse) => {\n        this.setState({\n          isFriend: isFriendResponse.data.isFriend,\n          isRequestSent: isSentResponse.data.isRequestSent,\n          isRequestReceived: isRecievedResponse.data.isRequestReceived\n        });\n      })).catch(error => {\n        console.log(error);\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps, _prevState) {\n    const url = this.props.match.url;\n    const previousUrl = prevProps && prevProps.match.url;\n\n    if (url !== previousUrl) {\n      this.props.taskUpdateUrl(this.props.match.url);\n    }\n\n    const token = sessionStorage.getItem(\"token\");\n    const userId = this.props.match.params.userId;\n    const prevUserId = prevProps.match.params.userId;\n\n    if (userId !== prevUserId) {\n      socket.off(\"feedPostUpdate\");\n      socket.off(\"feedPostCommentUpdate\");\n      socket.off(\"friendRequestUpdate\");\n      socket.off(\"friendAcceptUpdate\");\n\n      if (!userId) {\n        socket.on(\"feedPostUpdate\", () => {\n          axios.get(localUrl + \"/feed/currentUser\", {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          }).then(response => {\n            this.setState({\n              feed: response.data\n            });\n          });\n        });\n        socket.on(\"feedPostCommentUpdate\", () => {\n          axios.get(localUrl + \"/comments/feedComments/currentUser\", {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          }).then(response => {\n            this.setState({\n              feedComments: response.data\n            });\n          });\n        });\n        socket.on(\"friendRequestUpdate\", () => {\n          axios.get(localUrl + \"/requests\", {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          }).then(response => {\n            this.setState({\n              requests: response.data\n            });\n          });\n        });\n        axios.get(localUrl + \"/users\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }).then(response => {\n          this.setState({\n            currentUser: response.data,\n            profileInfo: response.data,\n            currentIsProfile: true\n          }, () => {\n            console.log(this.state.currentUser);\n          });\n          return axios.all([axios.get(localUrl + \"/favourites\", {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          }), axios.get(localUrl + \"/friends\", {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          }), axios.get(localUrl + \"/requests\", {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          }), axios.get(localUrl + \"/feed/currentUser\", {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          }), axios.get(localUrl + \"/comments/feedComments/currentUser\", {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          })]);\n        }).then(axios.spread((favouritesResponse, friendsResponse, requestsResponse, feedResponse, feedCommentsResponse) => {\n          console.log(favouritesResponse, friendsResponse, feedResponse, feedCommentsResponse);\n\n          if (favouritesResponse.data) {\n            this.setState({\n              index: 0,\n              favouriteTeams: favouritesResponse.data,\n              friends: friendsResponse.data,\n              requests: requestsResponse.data,\n              feed: feedResponse.data,\n              feedComments: feedCommentsResponse.data,\n              isFriend: true\n            });\n          } else {\n            this.setState({\n              index: 0,\n              friends: friendsResponse.data,\n              requests: requestsResponse.data,\n              feed: feedResponse.data,\n              feedComments: feedCommentsResponse.data,\n              isFriend: true\n            });\n          }\n        })).catch(error => {\n          console.log(error);\n        });\n      } else {\n        socket.on(\"feedPostUpdate\", () => {\n          axios.get(localUrl + \"/feed/\" + userId, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          }).then(response => {\n            this.setState({\n              feed: response.data\n            });\n          });\n        });\n        socket.on(\"feedPostCommentUpdate\", () => {\n          axios.get(localUrl + \"/comments/feedComments/\" + userId, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          }).then(response => {\n            this.setState({\n              feedComments: response.data\n            });\n          });\n        });\n        socket.on(\"friendAcceptUpdate\", () => {\n          console.log(\"it is working\");\n          axios.all([axios.get(localUrl + \"/friends/isFriend/\" + userId, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          }), axios.get(localUrl + \"/friends/\" + userId, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          })]).then(axios.spread((isFriendResponse, friendsResponse) => {\n            console.log(isFriendResponse.data, friendsResponse.data);\n            this.setState({\n              isFriend: isFriendResponse.data,\n              friends: friendsResponse.data\n            });\n          }));\n        });\n        axios.all([axios.get(localUrl + \"/favourites/user/\" + userId, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }), axios.get(localUrl + \"/users/\" + userId, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }), axios.get(localUrl + \"/users\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }), axios.get(localUrl + \"/friends/\" + userId, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }), axios.get(localUrl + \"/feed/\" + userId, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }), axios.get(localUrl + \"/comments/feedComments/\" + userId, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        })]).then(axios.spread((favouritesResponse, profileResponse, currentUserResponse, friendsResponse, feedResponse, feedCommentsResponse) => {\n          if (favouritesResponse.data) {\n            this.setState({\n              index: 0,\n              favouriteTeams: favouritesResponse.data,\n              currentUser: currentUserResponse.data,\n              profileInfo: profileResponse.data,\n              currentIsProfile: false,\n              friends: friendsResponse.data,\n              feed: feedResponse.data,\n              feedComments: feedCommentsResponse.data\n            });\n          } else {\n            this.setState({\n              index: 0,\n              currentUser: currentUserResponse.data,\n              profileInfo: profileResponse.data,\n              currentIsProfile: false,\n              friends: friendsResponse.data,\n              feed: feedResponse.data,\n              feedComments: feedCommentsResponse.data\n            });\n          }\n\n          return axios.all([axios.get(localUrl + \"/friends/isFriend/\" + userId, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          }), axios.get(localUrl + \"/requests/isRequestSent/\" + userId, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          }), axios.get(localUrl + \"/requests/isRequestReceived/\" + userId, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          })]);\n        })).then(axios.spread((isFriendResponse, isSentResponse, isRecievedResponse) => {\n          this.setState({\n            isFriend: isFriendResponse.data.isFriend,\n            isRequestSent: isSentResponse.data.isRequestSent,\n            isRequestReceived: isRecievedResponse.data.isRequestReceived\n          });\n        })).catch(error => {\n          console.log(error);\n        });\n      }\n    } else {\n      const {\n        index,\n        favouriteTeams,\n        pastEvents,\n        articles\n      } = this.state;\n\n      if (index < favouriteTeams.length) {\n        const teamId = favouriteTeams[index].idTeam;\n        const teamName = favouriteTeams[index].strTeam;\n        setTimeout(axios.all([axios.get(\"https://www.thesportsdb.com/api/v1/json/40130162/eventslast.php?id=\" + teamId), axios.get(\"https://gnews.io/api/v4/search?q=\" + teamName + \"&token=\" + API__KEY + \"&lang=en\")]).then(axios.spread((pastEventsResponse, teamNewsResponse) => {\n          let newPastEvents = pastEventsResponse.data.results;\n          let newArticles = teamNewsResponse.data.articles;\n          newPastEvents = newPastEvents.map(event => {\n            const {\n              strHomeTeam,\n              strAwayTeam,\n              intHomeScore,\n              intAwayScore,\n              dateEvent,\n              strVideo,\n              strFilename\n            } = event;\n            return {\n              strHomeTeam,\n              strAwayTeam,\n              intHomeScore,\n              intAwayScore,\n              dateEvent,\n              strVideo,\n              strFilename\n            };\n          });\n          newArticles = newArticles.map(article => {\n            const {\n              title,\n              image,\n              url\n            } = article;\n            return {\n              title,\n              image,\n              url\n            };\n          });\n          this.setState({\n            index: index + 1,\n            pastEvents: [...pastEvents, ...newPastEvents],\n            articles: [...articles, ...newArticles]\n          });\n        })), 2000);\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    socket.off(\"feedPostUpdate\");\n    socket.off(\"feedPostCommentUpdate\");\n    socket.off(\"friendRequestUpdate\");\n    socket.off(\"friendAcceptUpdate\");\n  }\n\n  render() {\n    const {\n      favouriteTeams,\n      selectedTeam,\n      detailsEnabled,\n      pastEvents,\n      articles,\n      profileInfo,\n      currentUser,\n      currentIsProfile,\n      friends,\n      requests,\n      isFriend,\n      isRequestSent,\n      isRequestReceived,\n      feed,\n      feedComments\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"user\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user__profile profile\",\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          className: \"profile__avatar\",\n          avatarUrl: profileInfo.imgUrl\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 654,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile__info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"profile__name\",\n            children: [profileInfo.name, \" \", profileInfo.lastName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 659,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"profile__date\",\n            children: [\"Joined \", timeDifference(profileInfo.timestamp)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 660,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"profile__description\",\n            children: profileInfo.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 661,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile__location-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"profile__location-icon\",\n              src: homeIcon,\n              alt: \"location\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 663,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile__location\",\n              children: [\"Lives in \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"profile__bold\",\n                children: profileInfo.location\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 664,\n                columnNumber: 71\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 664,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 662,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile__location-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"profile__location-icon\",\n              src: locationIcon,\n              alt: \"location\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 667,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile__location\",\n              children: [\"From \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"profile__bold\",\n                children: profileInfo.from\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 668,\n                columnNumber: 67\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 668,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 666,\n            columnNumber: 25\n          }, this), !currentIsProfile && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile__info-buttons\",\n            children: isFriend === null ? /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 674,\n              columnNumber: 37\n            }, this) : /*#__PURE__*/_jsxDEV(IsFriend, {\n              className: \"\",\n              isFriend: isFriend,\n              isRequestSent: isRequestSent,\n              isRequestReceived: isRequestReceived,\n              taskSendFriendRequest: this.taskSendFriendRequest,\n              taskAcceptFriendRequest: this.taskAcceptFriendRequest\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 676,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 671,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 658,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 653,\n        columnNumber: 17\n      }, this), isFriend === null ? /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 691,\n        columnNumber: 21\n      }, this) : isFriend === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user__profile-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user__interaction interaction\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"interaction__favourites\",\n            children: favouriteTeams.map(team => {\n              return /*#__PURE__*/_jsxDEV(TeamCard, {\n                className: \"interaction__fav-card\",\n                taskDisplayTeam: this.taskDisplayTeam,\n                strTeamBadge: team.strTeamBadge,\n                teamId: team.idTeam\n              }, team.idTeam, false, {\n                fileName: _jsxFileName,\n                lineNumber: 700,\n                columnNumber: 45\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 697,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"interaction__feed-container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"interaction__feed feed\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"feed__card\",\n                children: currentIsProfile ? /*#__PURE__*/_jsxDEV(FeedForm, {\n                  className: \"feed__form\",\n                  onSubmit: this.taskAddPost,\n                  profileUrl: currentUser.imgUrl,\n                  feedTitle: `${profileInfo.name}'s Feed`,\n                  placeholder: `What is on your mind?`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 715,\n                  columnNumber: 45\n                }, this) : /*#__PURE__*/_jsxDEV(FeedForm, {\n                  className: \"feed__form\",\n                  onSubmit: this.taskAddPost,\n                  profileUrl: currentUser.imgUrl,\n                  feedTitle: `${profileInfo.name}'s Feed`,\n                  placeholder: `Write something to ${profileInfo.name}...`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 723,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 712,\n                columnNumber: 41\n              }, this), feed.map(feedContent => {\n                return /*#__PURE__*/_jsxDEV(FeedCard, {\n                  className: \"feed__card\",\n                  feedContent: feedContent,\n                  feedComments: feedComments,\n                  taskTakeToGamePage: this.taskTakeToGamePage,\n                  taskAddCommentToPost: this.taskAddCommentToPost,\n                  userAvatar: currentUser.imgUrl\n                }, feedContent.feedId, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 734,\n                  columnNumber: 49\n                }, this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 711,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 710,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 696,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user__updates updates\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"updates__container\",\n            children: pastEvents.map(event => {\n              return /*#__PURE__*/_jsxDEV(EventScore, {\n                event: event\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 751,\n                columnNumber: 48\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 749,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"updates__container\",\n            children: articles.map(article => {\n              return /*#__PURE__*/_jsxDEV(NewsArticle, {\n                className: \"updates__news-article\",\n                newsArticle: article\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 757,\n                columnNumber: 45\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 754,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 748,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user__friends friends\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"friends__wrapper\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"friends__container\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"friends__title\",\n                children: \"Friends\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 768,\n                columnNumber: 41\n              }, this), friends.map(friend => {\n                return /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/user/\" + friend.friendId,\n                  children: /*#__PURE__*/_jsxDEV(ProfileImage, {\n                    className: \"friends__avatar\",\n                    imgSrc: friend.imgUrl\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 772,\n                    columnNumber: 53\n                  }, this)\n                }, friend.friendId, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 771,\n                  columnNumber: 49\n                }, this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 767,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"friends__request-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"friends__title\",\n                children: \"Requests\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 781,\n                columnNumber: 41\n              }, this), requests.map(request => {\n                return /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/user/\" + request.requestorId,\n                  children: /*#__PURE__*/_jsxDEV(ProfileImage, {\n                    className: \"friends__avatar\",\n                    imgSrc: request.imgUrl\n                  }, request.requestorId, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 785,\n                    columnNumber: 53\n                  }, this)\n                }, request.requestorId, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 784,\n                  columnNumber: 49\n                }, this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 780,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 766,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 765,\n          columnNumber: 29\n        }, this), detailsEnabled && /*#__PURE__*/_jsxDEV(TeamDetails, {\n          team: selectedTeam,\n          taskEndDisplayTeam: this.taskEndDisplayTeam,\n          taskUpdateFavourites: this.taskUpdateFavourites\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 797,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 695,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user__private private\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"private__wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"private__img\",\n            src: lockIcon,\n            alt: \"lock\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 807,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"private__card\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"private__title\",\n              children: \"This Account is Private\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 809,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"private__text\",\n              children: \"Send a friend request to this account to see their details.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 810,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 808,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 806,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 805,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 652,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default UserPage;","map":{"version":3,"sources":["/Users/cemakcevin/Desktop/Cem/Code/BrainStation/cem-akcevin-capstone/sportify/client/src/pages/UserPage/UserPage.js"],"names":["React","axios","Link","io","Avatar","TeamCard","TeamDetails","EventScore","NewsArticle","ProfileImage","IsFriend","FeedForm","FeedCard","lockIcon","homeIcon","locationIcon","timeDifference","API__KEY","localUrl","socket","UserPage","Component","state","index","favouriteTeams","selectedTeam","detailsEnabled","pastEvents","articles","currentUser","profileInfo","currentIsProfile","friends","requests","isFriend","isRequestSent","isRequestReceived","feed","feedComments","taskDisplayTeam","teamId","get","then","response","data","teams","setState","taskEndDisplayTeam","taskUpdateFavourites","token","sessionStorage","getItem","headers","Authorization","taskSendFriendRequest","userId","post","_response","emit","taskAcceptFriendRequest","requestorId","all","spread","friendsResponse","requestResponse","taskAddPost","event","preventDefault","commentText","target","value","contentType","commentData","reset","taskAddCommentToPost","contentId","receiverId","feedCommentData","taskTakeToGamePage","idEvent","props","history","push","componentDidMount","prevProps","_prevState","url","match","previousUrl","taskUpdateUrl","params","connect","on","off","console","log","favouritesResponse","requestsResponse","feedResponse","feedCommentsResponse","catch","error","isFriendResponse","profileResponse","currentUserResponse","isSentResponse","isRecievedResponse","componentDidUpdate","prevUserId","length","idTeam","teamName","strTeam","setTimeout","pastEventsResponse","teamNewsResponse","newPastEvents","results","newArticles","map","strHomeTeam","strAwayTeam","intHomeScore","intAwayScore","dateEvent","strVideo","strFilename","article","title","image","componentWillUnmount","render","imgUrl","name","lastName","timestamp","description","location","from","team","strTeamBadge","feedContent","feedId","friend","friendId","request"],"mappings":"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","sourcesContent":["import './UserPage.scss';\nimport React from 'react';\nimport axios from 'axios';\nimport {Link} from 'react-router-dom';\nimport io from 'socket.io-client';\n\nimport Avatar from '../../components/Avatar/Avatar';\nimport TeamCard from '../../components/TeamCard/TeamCard';\nimport TeamDetails from '../../components/TeamDetails/TeamDetails';\nimport EventScore from '../../components/EventScore/EventScore';\nimport NewsArticle from '../../components/NewsArticle/NewsArticle';\nimport ProfileImage from '../../components/ProfileImage/ProfileImage';\nimport IsFriend from '../../components/IsFriend/IsFriend';\nimport FeedForm from '../../components/FeedForm/FeedForm';\nimport FeedCard from '../../components/FeedCard/FeedCard';\n\nimport lockIcon from '../../assets/icons/lock-icon.png';\nimport homeIcon from '../../assets/icons/home-icon.png';\nimport locationIcon from '../../assets/icons/location-icon.png';\n\nimport timeDifference from '../../functions/timeDifference';\n\n\nconst API__KEY=\"dd7ed4159ce8b1df6d8cbadaa67c7cdf\";\nconst localUrl = \"http://localhost:8686\";\nlet socket;\n\n\nclass UserPage extends React.Component {\n\n\n    state = {\n        index: 0,\n        favouriteTeams:[],\n        selectedTeam: null,\n        detailsEnabled: false,\n        pastEvents: [],\n        articles: [],\n        currentUser: {},\n        profileInfo: {},\n        currentIsProfile: null,\n        friends: [],\n        requests: [],\n        isFriend: null,\n        isRequestSent: false,\n        isRequestReceived: false,\n        feed: [],\n        feedComments: []\n    }\n\n    componentDidMount(prevProps, _prevState) {\n\n        const url = this.props.match.url;\n        const previousUrl = prevProps && prevProps.match.url;\n\n        if(url !== previousUrl) {\n            this.props.taskUpdateUrl(this.props.match.url);\n        }\n\n        const token = sessionStorage.getItem(\"token\");\n        let userId = this.props.match.params.userId;\n\n        socket = io.connect(localUrl);\n\n        if(!userId) {\n\n            socket.on(\"feedPostUpdate\", () => {\n                axios.get(localUrl + \"/feed/currentUser\", {headers: {Authorization: `Bearer ${token}`}})\n                .then(response => {\n                    \n                    this.setState({\n                        feed: response.data\n                    })\n                })\n            });\n\n            socket.on(\"feedPostCommentUpdate\", () => {\n                axios.get(localUrl + \"/comments/feedComments/currentUser\", {headers: {Authorization: `Bearer ${token}`}})\n                .then(response => {\n                    \n                    this.setState({\n                        feedComments: response.data\n                    })\n                })\n            });\n\n            socket.on(\"friendRequestUpdate\", () => {\n                axios.get(localUrl + \"/requests\", {headers: {Authorization: `Bearer ${token}`}})\n                .then(response => {\n\n                    this.setState({\n                        requests: response.data,\n                    })\n                })\n            });\n\n            socket.off(\"friendAcceptUpdate\");\n\n            axios.get(localUrl + \"/users\", {headers: {Authorization: `Bearer ${token}`}})\n            .then(response => {\n                \n                userId = response.data.userId;\n                console.log(userId)\n\n                this.setState({\n                    currentUser: response.data,\n                    profileInfo: response.data,\n                    currentIsProfile: true\n                })\n\n                return axios.all([\n                    axios.get(localUrl + \"/favourites\", {headers: {Authorization: `Bearer ${token}`}}),\n                    axios.get(localUrl + \"/friends\", {headers: {Authorization: `Bearer ${token}`}}),\n                    axios.get(localUrl + \"/requests\", {headers: {Authorization: `Bearer ${token}`}}),\n                    axios.get(localUrl + \"/feed/currentUser\", {headers: {Authorization: `Bearer ${token}`}}),\n                    axios.get(localUrl + \"/comments/feedComments/currentUser\", {headers: {Authorization: `Bearer ${token}`}})\n                ])\n            })\n            .then(axios.spread((favouritesResponse, friendsResponse, requestsResponse, feedResponse, feedCommentsResponse)=> {\n                \n                if(favouritesResponse.data){\n                    this.setState({\n                        favouriteTeams: favouritesResponse.data,\n                        friends: friendsResponse.data,\n                        requests: requestsResponse.data,\n                        feed: feedResponse.data,\n                        feedComments: feedCommentsResponse.data,\n                        isFriend: true\n                    })\n                }\n                else {\n                    this.setState({\n                        friends: friendsResponse.data,\n                        requests: requestsResponse.data,\n                        feed: feedResponse.data,\n                        feedComments: feedCommentsResponse.data,\n                        isFriend: true\n                    },() =>  console.log(\"yess\"))\n                    \n                } \n            }))\n            .catch(error => {\n                console.log(error)\n            })\n        }\n        else {\n\n            socket.on(\"feedPostUpdate\", () => {\n                axios.get(localUrl + \"/feed/\" + userId, {headers: {Authorization: `Bearer ${token}`}})\n                .then(response => {\n                    \n                    this.setState({\n                        feed: response.data\n                    })\n                })\n            });\n\n            socket.on(\"feedPostCommentUpdate\", () => {\n                axios.get(localUrl + \"/comments/feedComments/\"  + userId, {headers: {Authorization: `Bearer ${token}`}})\n                .then(response => {\n                    \n                    this.setState({\n                        feedComments: response.data\n                    })\n                })\n            });\n\n            socket.on(\"friendAcceptUpdate\", () => {\n\n                console.log(\"it is working\");\n                axios.all([\n                    axios.get(localUrl + \"/friends/isFriend/\" + userId, {headers: {Authorization: `Bearer ${token}`}}),\n                    axios.get(localUrl + \"/friends/\" + userId, {headers: {Authorization: `Bearer ${token}`}})\n                ])\n                .then(axios.spread((isFriendResponse, friendsResponse) => {\n                    console.log(isFriendResponse.data, friendsResponse.data)\n                    \n                    this.setState({\n                        isFriend: isFriendResponse.data,\n                        friends: friendsResponse.data\n                    })\n                }))\n            });\n\n            socket.off(\"friendRequestUpdate\");\n\n            axios.all([\n                axios.get(localUrl + \"/favourites/user/\" + userId, {headers: {Authorization: `Bearer ${token}`}}),\n                axios.get(localUrl + \"/users/\" + userId, {headers: {Authorization: `Bearer ${token}`}}),\n                axios.get(localUrl + \"/users\", {headers: {Authorization: `Bearer ${token}`}}),\n                axios.get(localUrl + \"/friends/\" + userId, {headers: {Authorization: `Bearer ${token}`}}),\n                axios.get(localUrl + \"/feed/\" + userId, {headers: {Authorization: `Bearer ${token}`}}),\n                axios.get(localUrl + \"/comments/feedComments/\" + userId, {headers: {Authorization: `Bearer ${token}`}})\n            ])\n            .then(axios.spread((favouritesResponse, profileResponse, currentUserResponse, \n                friendsResponse, feedResponse, feedCommentsResponse)=> {\n                if(favouritesResponse.data){\n                    this.setState({\n                        favouriteTeams: favouritesResponse.data,\n                        currentUser: currentUserResponse.data,\n                        profileInfo: profileResponse.data,\n                        currentIsProfile: false,\n                        friends: friendsResponse.data,\n                        feed: feedResponse.data,\n                        feedComments: feedCommentsResponse.data,\n                    })\n                }\n                else {\n                    this.setState({\n                        currentUser: currentUserResponse.data,\n                        profileInfo: profileResponse.data,\n                        currentIsProfile: false,\n                        friends: friendsResponse.data,\n                        feed: feedResponse.data,\n                        feedComments: feedCommentsResponse.data,\n                    })\n                    \n                } \n            \n                return axios.all([\n                    axios.get(localUrl + \"/friends/isFriend/\" + userId, {headers: {Authorization: `Bearer ${token}`}}),\n                    axios.get(localUrl + \"/requests/isRequestSent/\" + userId, {headers: {Authorization: `Bearer ${token}`}}),\n                    axios.get(localUrl + \"/requests/isRequestReceived/\" + userId, {headers: {Authorization: `Bearer ${token}`}})\n                ])\n            }))\n            .then(axios.spread((isFriendResponse, isSentResponse, isRecievedResponse) => {\n    \n                this.setState({\n                    isFriend: isFriendResponse.data.isFriend,\n                    isRequestSent: isSentResponse.data.isRequestSent,\n                    isRequestReceived: isRecievedResponse.data.isRequestReceived\n                })\n            }))\n            .catch(error => {\n                console.log(error)\n            })\n        }\n\n        \n    }\n\n    componentDidUpdate(prevProps, _prevState) {\n        \n        const url = this.props.match.url;\n        const previousUrl = prevProps && prevProps.match.url;\n\n        if(url !== previousUrl) {\n            this.props.taskUpdateUrl(this.props.match.url);\n        }\n\n        const token = sessionStorage.getItem(\"token\");\n\n        const userId = this.props.match.params.userId;\n        const prevUserId = prevProps.match.params.userId;\n\n        if(userId !== prevUserId) {\n\n            socket.off(\"feedPostUpdate\");\n            socket.off(\"feedPostCommentUpdate\");\n            socket.off(\"friendRequestUpdate\");\n            socket.off(\"friendAcceptUpdate\");\n\n            if(!userId) {\n\n                socket.on(\"feedPostUpdate\", () => {\n                \n                    axios.get(localUrl + \"/feed/currentUser\", {headers: {Authorization: `Bearer ${token}`}})\n                    .then(response => {\n                        \n                        this.setState({\n                            feed: response.data\n                        })\n                    })\n                })\n                \n                socket.on(\"feedPostCommentUpdate\", () => {\n                    axios.get(localUrl + \"/comments/feedComments/currentUser\", {headers: {Authorization: `Bearer ${token}`}})\n                    .then(response => {\n                        \n                        this.setState({\n                            feedComments: response.data\n                        })\n                    })\n                })\n\n                socket.on(\"friendRequestUpdate\", () => {\n                    axios.get(localUrl + \"/requests\", {headers: {Authorization: `Bearer ${token}`}})\n                    .then(response => {\n                        \n                        this.setState({\n                            requests: response.data\n                        })\n                    })\n                })\n    \n                axios.get(localUrl + \"/users\", {headers: {Authorization: `Bearer ${token}`}})\n                .then(response => {\n    \n                    this.setState({\n                        currentUser: response.data,\n                        profileInfo: response.data,\n                        currentIsProfile: true\n                    }, () => {\n                        console.log(this.state.currentUser)\n                    })\n    \n                    return axios.all([\n                        axios.get(localUrl + \"/favourites\", {headers: {Authorization: `Bearer ${token}`}}),\n                        axios.get(localUrl + \"/friends\", {headers: {Authorization: `Bearer ${token}`}}),\n                        axios.get(localUrl + \"/requests\", {headers: {Authorization: `Bearer ${token}`}}),\n                        axios.get(localUrl + \"/feed/currentUser\", {headers: {Authorization: `Bearer ${token}`}}),\n                        axios.get(localUrl + \"/comments/feedComments/currentUser\", {headers: {Authorization: `Bearer ${token}`}})\n                    ])\n                })\n                .then(axios.spread((favouritesResponse, friendsResponse, requestsResponse, feedResponse, feedCommentsResponse)=> {\n                    console.log(favouritesResponse, friendsResponse, feedResponse, feedCommentsResponse)\n                    if(favouritesResponse.data){\n                        this.setState({\n                            index: 0,\n                            favouriteTeams: favouritesResponse.data,\n                            friends: friendsResponse.data,\n                            requests: requestsResponse.data,\n                            feed: feedResponse.data,\n                            feedComments: feedCommentsResponse.data,\n                            isFriend: true\n                        })\n                    }\n                    else {\n                        this.setState({\n                            index:0,\n                            friends: friendsResponse.data,\n                            requests: requestsResponse.data,\n                            feed: feedResponse.data,\n                            feedComments: feedCommentsResponse.data,\n                            isFriend: true\n                        })\n                        \n                    } \n                }))\n                .catch(error => {\n                    console.log(error)\n                })\n            }\n            else {\n\n                socket.on(\"feedPostUpdate\", () => {\n                \n                    axios.get(localUrl + \"/feed/\" + userId, {headers: {Authorization: `Bearer ${token}`}})\n                    .then(response => {\n                        \n                        this.setState({\n                            feed: response.data\n                        })\n                    })\n                });\n\n                socket.on(\"feedPostCommentUpdate\", () => {\n                    axios.get(localUrl + \"/comments/feedComments/\"  + userId, {headers: {Authorization: `Bearer ${token}`}})\n                    .then(response => {\n                        \n                        this.setState({\n                            feedComments: response.data\n                        })\n                    })\n                });\n\n                socket.on(\"friendAcceptUpdate\", () => {\n                    console.log(\"it is working\");\n                    axios.all([\n                        axios.get(localUrl + \"/friends/isFriend/\" + userId, {headers: {Authorization: `Bearer ${token}`}}),\n                        axios.get(localUrl + \"/friends/\" + userId, {headers: {Authorization: `Bearer ${token}`}})\n                    ])\n                    .then(axios.spread((isFriendResponse, friendsResponse) => {\n                        console.log(isFriendResponse.data, friendsResponse.data)\n                        this.setState({\n                            isFriend: isFriendResponse.data,\n                            friends: friendsResponse.data\n                        })\n                    }))\n                });\n\n                axios.all([\n                    axios.get(localUrl + \"/favourites/user/\" + userId, {headers: {Authorization: `Bearer ${token}`}}),\n                    axios.get(localUrl + \"/users/\" + userId, {headers: {Authorization: `Bearer ${token}`}}),\n                    axios.get(localUrl + \"/users\", {headers: {Authorization: `Bearer ${token}`}}),\n                    axios.get(localUrl + \"/friends/\" + userId, {headers: {Authorization: `Bearer ${token}`}}),\n                    axios.get(localUrl + \"/feed/\" + userId, {headers: {Authorization: `Bearer ${token}`}}),\n                    axios.get(localUrl + \"/comments/feedComments/\" + userId, {headers: {Authorization: `Bearer ${token}`}})\n                ])\n                .then(axios.spread((favouritesResponse, profileResponse, currentUserResponse, \n                    friendsResponse, feedResponse, feedCommentsResponse)=> {\n                    if(favouritesResponse.data){\n                        this.setState({\n                            index: 0,\n                            favouriteTeams: favouritesResponse.data,\n                            currentUser: currentUserResponse.data,\n                            profileInfo: profileResponse.data,\n                            currentIsProfile: false,\n                            friends: friendsResponse.data,\n                            feed: feedResponse.data,\n                            feedComments: feedCommentsResponse.data,\n                        })\n                    }\n                    else {\n                        this.setState({\n                            index: 0,\n                            currentUser: currentUserResponse.data,\n                            profileInfo: profileResponse.data,\n                            currentIsProfile: false,\n                            friends: friendsResponse.data,\n                            feed: feedResponse.data,\n                            feedComments: feedCommentsResponse.data,\n                        })\n                        \n                    } \n                \n                    return axios.all([\n                        axios.get(localUrl + \"/friends/isFriend/\" + userId, {headers: {Authorization: `Bearer ${token}`}}),\n                        axios.get(localUrl + \"/requests/isRequestSent/\" + userId, {headers: {Authorization: `Bearer ${token}`}}),\n                        axios.get(localUrl + \"/requests/isRequestReceived/\" + userId, {headers: {Authorization: `Bearer ${token}`}})\n                    ])\n                }))\n                .then(axios.spread((isFriendResponse, isSentResponse, isRecievedResponse) => {\n        \n                    this.setState({\n                        isFriend: isFriendResponse.data.isFriend,\n                        isRequestSent: isSentResponse.data.isRequestSent,\n                        isRequestReceived: isRecievedResponse.data.isRequestReceived\n                    })\n                }))\n                .catch(error => {\n                    console.log(error)\n                })\n            }\n        } \n        else {\n\n            const {index, favouriteTeams, pastEvents, articles} = this.state;\n\n            if(index < favouriteTeams.length) {\n\n                const teamId = favouriteTeams[index].idTeam;\n                const teamName = favouriteTeams[index].strTeam;\n\n                setTimeout(axios.all([\n                    axios.get(\"https://www.thesportsdb.com/api/v1/json/40130162/eventslast.php?id=\" + teamId),\n                    axios.get(\"https://gnews.io/api/v4/search?q=\" + teamName + \"&token=\" + API__KEY + \"&lang=en\")\n                ]).then(axios.spread((pastEventsResponse, teamNewsResponse) => {\n\n                    let newPastEvents = pastEventsResponse.data.results;\n                    let newArticles = teamNewsResponse.data.articles;\n\n                    newPastEvents = newPastEvents.map(event => {\n                        const {strHomeTeam, strAwayTeam, intHomeScore, intAwayScore, dateEvent, strVideo, strFilename} = event;\n                        return {strHomeTeam, strAwayTeam, intHomeScore, intAwayScore, dateEvent, strVideo, strFilename};\n                    })\n\n                    newArticles = newArticles.map(article => {\n                        const {title, image, url} = article;\n                        return {title, image, url};\n                    })\n                    \n                    this.setState({\n                        index: index + 1,\n                        pastEvents: [...pastEvents, ...newPastEvents],\n                        articles: [...articles, ...newArticles]\n                    })\n                })) ,2000)\n\n            }\n        }\n    }\n\n    componentWillUnmount() {\n\n        socket.off(\"feedPostUpdate\");\n        socket.off(\"feedPostCommentUpdate\");\n        socket.off(\"friendRequestUpdate\");\n        socket.off(\"friendAcceptUpdate\");\n    }\n\n    taskDisplayTeam = (teamId) => {\n        axios.get(\"https://www.thesportsdb.com/api/v1/json/40130162/lookupteam.php?id=\" + teamId)\n        .then(response => {\n            const selectedTeam = response.data.teams[0];\n\n            this.setState({\n                selectedTeam: selectedTeam,\n                detailsEnabled: true\n            })\n        })\n    }\n\n    taskEndDisplayTeam = () => {\n        \n        this.setState({\n            detailsEnabled: false\n        })\n    }\n\n    taskUpdateFavourites = () => {\n\n        const token = sessionStorage.getItem(\"token\");\n\n        axios.get(localUrl + \"/favourites\", {headers: {Authorization: `Bearer ${token}`}})\n        .then(response => {\n            \n            if(response.data){\n                this.setState({\n                    favouriteTeams: response.data\n                })\n            }\n            else {\n                this.setState({\n                    favouriteTeams: []\n                })\n            } \n\n        })\n    }\n\n    taskSendFriendRequest = () => {\n\n        const {profileInfo} = this.state;\n\n        const token = sessionStorage.getItem(\"token\");\n        const userId = profileInfo.userId;\n\n        axios.post(localUrl + '/requests', {userId}, {headers: {Authorization: `Bearer ${token}`}})\n        .then(_response => {\n            \n            this.setState({\n                isRequestSent: true\n            }, () => {\n\n                socket.emit(\"friendRequest\");\n            })\n        })\n    }\n\n    taskAcceptFriendRequest = () => {\n\n        const {profileInfo} = this.state;\n\n        const token = sessionStorage.getItem(\"token\");\n        const requestorId = profileInfo.userId;\n        \n\n        axios.post(localUrl + '/requests/acceptRequest', {requestorId}, {headers: {Authorization: `Bearer ${token}`}})\n        .then(_response => {\n\n            return axios.all([\n                axios.get(localUrl + \"/friends/\" + requestorId, {headers: {Authorization: `Bearer ${token}`}}),\n                axios.get(localUrl + \"/requests/\" + requestorId, {headers: {Authorization: `Bearer ${token}`}}),\n            ])\n            .then(axios.spread((friendsResponse, requestResponse) => {\n\n                this.setState({\n                    isFriend: true,\n                    friends: friendsResponse.data,\n                    requests: requestResponse.data\n                }, () => {\n    \n                    socket.emit(\"friendAccept\");\n                })\n\n            }))\n        })\n    }\n\n    taskAddPost = (event) => {\n\n        event.preventDefault();\n\n        const {profileInfo} = this.state;\n    \n        const token = sessionStorage.getItem(\"token\");\n\n        const commentText = event.target.commentText.value;\n        const contentType = \"comment\";\n        const userId = profileInfo.userId;\n        \n        const commentData = {\n            userId, \n            commentText, \n            contentType\n        }\n        \n        axios.post(localUrl + \"/feed\", commentData, {headers: {Authorization: `Bearer ${token}`}})\n        .then(response => {\n            this.setState({\n                feed: response.data\n            }, () => {\n                event.target.reset();\n\n                socket.emit(\"feedPost\", {feed: response.data});\n            })\n        })\n\n    }\n\n    taskAddCommentToPost = (event) => {\n\n        event.preventDefault();\n\n        const {profileInfo} = this.state;\n\n        const token = sessionStorage.getItem(\"token\");\n        const userId = profileInfo.userId;\n\n        const commentText = event.target.commentText.value;\n        const contentId = event.target.contentId.value;\n        const contentType = event.target.contentType.value;\n        const receiverId = event.target.receiverId.value;\n\n        const feedCommentData = {\n            contentId, \n            contentType, \n            commentText, \n            receiverId\n        }\n\n        axios.post(localUrl + \"/comments\", feedCommentData, {headers: {Authorization: `Bearer ${token}`}})\n        .then(_response => {\n\n            return axios.get(localUrl + \"/comments/feedComments/\" + userId, {headers: {Authorization: `Bearer ${token}`}})\n        })\n        .then(response => {\n\n            this.setState({\n                feedComments: response.data\n            }, () => {\n\n                event.target.reset();\n                socket.emit(\"feedPostComment\", {feedComments: response.data})\n            })\n        })\n    }\n\n    taskTakeToGamePage = (idEvent) => {\n\n        this.props.history.push('/game/' + idEvent);\n    }\n\n    render () {\n\n        const {favouriteTeams, selectedTeam, detailsEnabled, \n            pastEvents, articles, profileInfo, currentUser, currentIsProfile, friends, requests, isFriend, \n            isRequestSent, isRequestReceived, feed, feedComments} = this.state;\n\n        return(\n            <main className=\"user\">\n                <div className=\"user__profile profile\">\n                    <Avatar \n                        className=\"profile__avatar\" \n                        avatarUrl={profileInfo.imgUrl} \n                    />\n                    <div className=\"profile__info\">\n                        <h3 className=\"profile__name\">{profileInfo.name} {profileInfo.lastName}</h3>\n                        <p className=\"profile__date\">Joined {timeDifference(profileInfo.timestamp)}</p>\n                        <p className=\"profile__description\">{profileInfo.description}</p>\n                        <div className=\"profile__location-container\">\n                            <img className=\"profile__location-icon\" src={homeIcon} alt=\"location\"/>\n                            <p className=\"profile__location\">Lives in <span className=\"profile__bold\">{profileInfo.location}</span></p>\n                        </div> \n                        <div className=\"profile__location-container\">\n                            <img className=\"profile__location-icon\" src={locationIcon} alt=\"location\"/>\n                            <p className=\"profile__location\">From <span className=\"profile__bold\">{profileInfo.from}</span></p>\n                        </div>\n                        {!currentIsProfile && \n                            <div className=\"profile__info-buttons\">\n                                {isFriend === null\n                                    ?\n                                    <div></div>\n                                    :\n                                    <IsFriend \n                                        className=\"\"\n                                        isFriend={isFriend}\n                                        isRequestSent={isRequestSent}\n                                        isRequestReceived={isRequestReceived}\n                                        taskSendFriendRequest={this.taskSendFriendRequest}\n                                        taskAcceptFriendRequest={this.taskAcceptFriendRequest}\n                                    />\n                                }\n                            </div>\n                        }\n                    </div>\n                </div>\n                {isFriend === null\n                    ?\n                    <div></div>\n                    :\n                    (isFriend === true\n                        ?\n                        <div className=\"user__profile-details\">\n                            <div className=\"user__interaction interaction\">\n                                <div className=\"interaction__favourites\">\n                                    {favouriteTeams.map(team => {\n                                        return (\n                                            <TeamCard \n                                                className=\"interaction__fav-card\" \n                                                key={team.idTeam}\n                                                taskDisplayTeam={this.taskDisplayTeam}\n                                                strTeamBadge={team.strTeamBadge}\n                                                teamId={team.idTeam} \n                                            />\n                                        )\n                                    })} \n                                </div>\n                                <div className=\"interaction__feed-container\">\n                                    <div className=\"interaction__feed feed\">\n                                        <div className=\"feed__card\">\n                                            {currentIsProfile\n                                            ?\n                                            <FeedForm \n                                                className=\"feed__form\"\n                                                onSubmit={this.taskAddPost}\n                                                profileUrl={currentUser.imgUrl}\n                                                feedTitle={`${profileInfo.name}'s Feed`}\n                                                placeholder={`What is on your mind?`}\n                                            />\n                                            :\n                                            <FeedForm \n                                                className=\"feed__form\"\n                                                onSubmit={this.taskAddPost}\n                                                profileUrl={currentUser.imgUrl}\n                                                feedTitle={`${profileInfo.name}'s Feed`}\n                                                placeholder={`Write something to ${profileInfo.name}...`}\n                                            />\n                                            }\n                                        </div>\n                                        {feed.map(feedContent => {\n                                            return (\n                                                <FeedCard \n                                                    className=\"feed__card\"\n                                                    key={feedContent.feedId}\n                                                    feedContent={feedContent}\n                                                    feedComments={feedComments}\n                                                    taskTakeToGamePage={this.taskTakeToGamePage}\n                                                    taskAddCommentToPost={this.taskAddCommentToPost}\n                                                    userAvatar={currentUser.imgUrl}\n                                                />\n                                            )\n                                        })}\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"user__updates updates\">\n                                <div className=\"updates__container\">\n                                    {pastEvents.map(event => {\n                                        return <EventScore event={event} />\n                                    })}\n                                </div>\n                                <div className=\"updates__container\">\n                                    {articles.map(article => {\n                                        return (\n                                            <NewsArticle \n                                                className=\"updates__news-article\" \n                                                newsArticle={article} \n                                            />\n                                        )\n                                    })}\n                                </div>\n                            </div>\n                            <div className=\"user__friends friends\">\n                                <div className=\"friends__wrapper\">\n                                    <div className=\"friends__container\">\n                                        <h3 className=\"friends__title\">Friends</h3>\n                                        {friends.map(friend => {\n                                            return(\n                                                <Link key={friend.friendId} to={\"/user/\" + friend.friendId}>\n                                                    <ProfileImage \n                                                        className=\"friends__avatar\"\n                                                        imgSrc={friend.imgUrl}\n                                                    />\n                                                </Link>\n                                            )\n                                        })}\n                                    </div>\n                                    <div className=\"friends__request-container\">\n                                        <h3 className=\"friends__title\">Requests</h3>\n                                        {requests.map(request => {\n                                            return(\n                                                <Link key={request.requestorId} to={\"/user/\" + request.requestorId}>\n                                                    <ProfileImage \n                                                        key={request.requestorId}\n                                                        className=\"friends__avatar\"\n                                                        imgSrc={request.imgUrl}\n                                                    />\n                                                </Link>\n                                            )\n                                        })}\n                                    </div>\n                                </div>\n                            </div>\n                            {detailsEnabled && \n                                <TeamDetails \n                                    team={selectedTeam} \n                                    taskEndDisplayTeam={this.taskEndDisplayTeam}\n                                    taskUpdateFavourites={this.taskUpdateFavourites}\n                                />\n                            }\n                        </div>\n                        :\n                        <div className=\"user__private private\">\n                            <div className=\"private__wrapper\">\n                                <img className=\"private__img\" src={lockIcon} alt=\"lock\"/>\n                                <div className=\"private__card\">    \n                                    <h3 className=\"private__title\">This Account is Private</h3>\n                                    <p className=\"private__text\">Send a friend request to this account to see their details.</p>\n                                </div>\n                            </div>\n                        </div>\n                    )\n                }\n                \n                \n            </main>\n        )\n    }\n    \n}\n\nexport default UserPage;"]},"metadata":{},"sourceType":"module"}