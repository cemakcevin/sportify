{"ast":null,"code":"var _jsxFileName = \"/Users/cemakcevin/Desktop/Cem/Code/BrainStation/cem-akcevin-capstone/sportify/client/src/pages/HomePage/HomePage.js\";\nimport './HomePage.scss';\nimport React from 'react';\nimport Avatar from '../../components/Avatar/Avatar';\nimport TeamCard from '../../components/TeamCard/TeamCard';\nimport TeamDetails from '../../components/TeamDetails/TeamDetails';\nimport EventScore from '../../components/EventScore/EventScore';\nimport NewsArticle from '../../components/NewsArticle/NewsArticle';\nimport avatarUrl from '../../assets/pictures/profile.jpeg';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API__KEY = \"8b0979907442ae756bd39495fb5eebd0\";\nconst localUrl = \"http://localhost:8686\";\n\nclass HomePage extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      index: 0,\n      favouriteTeams: [],\n      selectedTeam: null,\n      detailsEnabled: false,\n      pastEvents: [],\n      articles: [],\n      profileInfo: {},\n      friends: []\n    };\n\n    this.taskDisplayTeam = teamId => {\n      axios.get(\"https://www.thesportsdb.com/api/v1/json/40130162/lookupteam.php?id=\" + teamId).then(response => {\n        const selectedTeam = response.data.teams[0];\n        this.setState({\n          selectedTeam: selectedTeam,\n          detailsEnabled: true\n        });\n      });\n    };\n\n    this.taskEndDisplayTeam = () => {\n      this.setState({\n        detailsEnabled: false\n      });\n    };\n\n    this.taskUpdateFavourites = () => {\n      const token = sessionStorage.getItem(\"token\");\n      axios.get(localUrl + \"/favourites\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(response => {\n        if (response.data) {\n          this.setState({\n            favouriteTeams: response.data\n          });\n        } else {\n          this.setState({\n            favouriteTeams: []\n          });\n        }\n      });\n    };\n  }\n\n  componentDidMount() {\n    const token = sessionStorage.getItem(\"token\");\n    axios.get(localUrl + \"/favourites\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(response => {\n      if (response.data) {\n        this.setState({\n          favouriteTeams: response.data\n        });\n      }\n    });\n    axios.all([axios.get(localUrl + \"/favourites\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }), axios.get(localUrl + \"/users\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }), axios.get(localUrl + \"/friends\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    })]).then(axios.spread((favouritesResponse, profileResponse, friendsResponse) => {\n      if (favouritesResponse.data) {\n        this.setState({\n          favouriteTeams: favouritesResponse.data,\n          profileInfo: profileResponse.data,\n          friends: friendsResponse.data\n        });\n      } else {\n        this.setState({\n          profileInfo: profileResponse.data,\n          friends: friendsResponse.data\n        });\n      }\n    }));\n  }\n\n  componentDidUpdate() {\n    const {\n      index,\n      favouriteTeams,\n      pastEvents,\n      articles\n    } = this.state;\n    console.log(index);\n\n    if (index < favouriteTeams.length) {\n      const teamId = favouriteTeams[index].idTeam;\n      const teamName = favouriteTeams[index].strTeam;\n      setTimeout(axios.all([axios.get(\"https://www.thesportsdb.com/api/v1/json/40130162/eventslast.php?id=\" + teamId), axios.get(\"https://gnews.io/api/v4/search?q=\" + teamName + \"&token=\" + API__KEY + \"&lang=en\")]).then(axios.spread((pastEventsResponse, teamNewsResponse) => {\n        let newPastEvents = pastEventsResponse.data.results;\n        let newArticles = teamNewsResponse.data.articles;\n        newPastEvents = newPastEvents.map(event => {\n          const {\n            strHomeTeam,\n            strAwayTeam,\n            intHomeScore,\n            intAwayScore,\n            dateEvent,\n            strVideo,\n            strFilename\n          } = event;\n          return {\n            strHomeTeam,\n            strAwayTeam,\n            intHomeScore,\n            intAwayScore,\n            dateEvent,\n            strVideo,\n            strFilename\n          };\n        });\n        newArticles = newArticles.map(article => {\n          const {\n            title,\n            image,\n            url\n          } = article;\n          return {\n            title,\n            image,\n            url\n          };\n        }); // const {strHomeTeam, strAwayTeam, intHomeScore, intAwayScore, dateEvent, strVideo, strFilename} = pastEventsResponse.data.results;\n        // const {title, image, url} = teamNewsResponse.data.articles;\n        // const newPastEvents = {strHomeTeam, strAwayTeam, intHomeScore, intAwayScore, dateEvent, strVideo, strFilename};\n        // const newArticles = {title, image, url};\n\n        this.setState({\n          index: index + 1,\n          pastEvents: [...pastEvents, ...newPastEvents],\n          articles: [...articles, ...newArticles]\n        });\n      })), 1000);\n    }\n  }\n\n  render() {\n    const {\n      favouriteTeams,\n      selectedTeam,\n      detailsEnabled,\n      pastEvents,\n      articles,\n      profileInfo,\n      friends\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"home\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"home__profile profile\",\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          className: \"profile__avatar\",\n          avatarUrl: profileInfo.imgUrl\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile__info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"home__interaction interaction\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"interaction__favourites\",\n          children: favouriteTeams.map(team => {\n            return /*#__PURE__*/_jsxDEV(TeamCard, {\n              className: \"interaction__fav-card\",\n              taskDisplayTeam: this.taskDisplayTeam,\n              strTeamBadge: team.strTeamBadge,\n              teamId: team.idTeam\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 33\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"interaction__feed-container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"interaction__feed feed\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"home__updates updates\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"updates__container\",\n          children: pastEvents.map(event => {\n            return /*#__PURE__*/_jsxDEV(EventScore, {\n              event: event\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 36\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"updates__container\",\n          children: articles.map(article => {\n            return /*#__PURE__*/_jsxDEV(NewsArticle, {\n              className: \"team__news-article\",\n              newsArticle: article\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 33\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"home__friends friends\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"friends__wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"friends__container\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"friends__container\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }, this), detailsEnabled && /*#__PURE__*/_jsxDEV(TeamDetails, {\n        team: selectedTeam,\n        taskEndDisplayTeam: this.taskEndDisplayTeam,\n        taskUpdateFavourites: this.taskUpdateFavourites\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default HomePage;","map":{"version":3,"sources":["/Users/cemakcevin/Desktop/Cem/Code/BrainStation/cem-akcevin-capstone/sportify/client/src/pages/HomePage/HomePage.js"],"names":["React","Avatar","TeamCard","TeamDetails","EventScore","NewsArticle","avatarUrl","axios","API__KEY","localUrl","HomePage","Component","state","index","favouriteTeams","selectedTeam","detailsEnabled","pastEvents","articles","profileInfo","friends","taskDisplayTeam","teamId","get","then","response","data","teams","setState","taskEndDisplayTeam","taskUpdateFavourites","token","sessionStorage","getItem","headers","Authorization","componentDidMount","all","spread","favouritesResponse","profileResponse","friendsResponse","componentDidUpdate","console","log","length","idTeam","teamName","strTeam","setTimeout","pastEventsResponse","teamNewsResponse","newPastEvents","results","newArticles","map","event","strHomeTeam","strAwayTeam","intHomeScore","intAwayScore","dateEvent","strVideo","strFilename","article","title","image","url","render","imgUrl","team","strTeamBadge"],"mappings":"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","sourcesContent":["import './HomePage.scss';\nimport React from 'react';\n\nimport Avatar from '../../components/Avatar/Avatar';\nimport TeamCard from '../../components/TeamCard/TeamCard';\nimport TeamDetails from '../../components/TeamDetails/TeamDetails';\nimport EventScore from '../../components/EventScore/EventScore';\nimport NewsArticle from '../../components/NewsArticle/NewsArticle';\n\nimport avatarUrl from '../../assets/pictures/profile.jpeg';\nimport axios from 'axios';\n\nconst API__KEY=\"8b0979907442ae756bd39495fb5eebd0\";\nconst localUrl = \"http://localhost:8686\";\n\n\nclass HomePage extends React.Component {\n\n\n    state = {\n        index: 0,\n        favouriteTeams:[],\n        selectedTeam: null,\n        detailsEnabled: false,\n        pastEvents: [],\n        articles: [],\n        profileInfo: {},\n        friends: []\n    }\n\n    componentDidMount() {\n        const token = sessionStorage.getItem(\"token\");\n       \n        axios.get(localUrl + \"/favourites\", {headers: {Authorization: `Bearer ${token}`}})\n        .then(response => {\n            \n            if(response.data){\n                this.setState({\n                    favouriteTeams: response.data\n                })\n            }  \n        })\n\n        axios.all([\n            axios.get(localUrl + \"/favourites\", {headers: {Authorization: `Bearer ${token}`}}),\n            axios.get(localUrl + \"/users\", {headers: {Authorization: `Bearer ${token}`}}),\n            axios.get(localUrl + \"/friends\", {headers: {Authorization: `Bearer ${token}`}})\n        ])\n        .then(axios.spread((favouritesResponse, profileResponse, friendsResponse)=> {\n            \n            if(favouritesResponse.data){\n                this.setState({\n                    favouriteTeams: favouritesResponse.data,\n                    profileInfo: profileResponse.data,\n                    friends: friendsResponse.data\n                })\n            }\n            else {\n                this.setState({\n                    profileInfo: profileResponse.data,\n                    friends: friendsResponse.data\n                })\n            }  \n        }))\n    }\n\n    componentDidUpdate() {\n        const {index, favouriteTeams, pastEvents, articles} = this.state;\n\n        console.log(index)\n        if(index < favouriteTeams.length) {\n\n            const teamId = favouriteTeams[index].idTeam;\n            const teamName = favouriteTeams[index].strTeam;\n\n            setTimeout(axios.all([\n                axios.get(\"https://www.thesportsdb.com/api/v1/json/40130162/eventslast.php?id=\" + teamId),\n                axios.get(\"https://gnews.io/api/v4/search?q=\" + teamName + \"&token=\" + API__KEY + \"&lang=en\")\n            ]).then(axios.spread((pastEventsResponse, teamNewsResponse) => {\n\n                let newPastEvents = pastEventsResponse.data.results;\n                let newArticles = teamNewsResponse.data.articles;\n\n                newPastEvents = newPastEvents.map(event => {\n                    const {strHomeTeam, strAwayTeam, intHomeScore, intAwayScore, dateEvent, strVideo, strFilename} = event;\n                    return {strHomeTeam, strAwayTeam, intHomeScore, intAwayScore, dateEvent, strVideo, strFilename};\n                })\n\n                newArticles = newArticles.map(article => {\n                    const {title, image, url} = article;\n                    return {title, image, url};\n                })\n\n                // const {strHomeTeam, strAwayTeam, intHomeScore, intAwayScore, dateEvent, strVideo, strFilename} = pastEventsResponse.data.results;\n                // const {title, image, url} = teamNewsResponse.data.articles;\n\n                // const newPastEvents = {strHomeTeam, strAwayTeam, intHomeScore, intAwayScore, dateEvent, strVideo, strFilename};\n                // const newArticles = {title, image, url};\n\n                this.setState({\n                    index: index + 1,\n                    pastEvents: [...pastEvents, ...newPastEvents],\n                    articles: [...articles, ...newArticles]\n                })\n            })) ,1000)\n            \n\n        }\n        \n        \n        \n    }\n\n    taskDisplayTeam = (teamId) => {\n        axios.get(\"https://www.thesportsdb.com/api/v1/json/40130162/lookupteam.php?id=\" + teamId)\n        .then(response => {\n            const selectedTeam = response.data.teams[0];\n\n            this.setState({\n                selectedTeam: selectedTeam,\n                detailsEnabled: true\n            })\n        })\n    }\n\n    taskEndDisplayTeam = () => {\n        \n        this.setState({\n            detailsEnabled: false\n        })\n    }\n\n    taskUpdateFavourites = () => {\n\n        const token = sessionStorage.getItem(\"token\");\n\n        axios.get(localUrl + \"/favourites\", {headers: {Authorization: `Bearer ${token}`}})\n        .then(response => {\n            \n            if(response.data){\n                this.setState({\n                    favouriteTeams: response.data\n                })\n            }\n            else {\n                this.setState({\n                    favouriteTeams: []\n                })\n            } \n\n        })\n    }\n\n    render () {\n\n        const {favouriteTeams, selectedTeam, detailsEnabled, pastEvents, articles, profileInfo, friends} = this.state;\n\n        return(\n            <main className=\"home\">\n                <div className=\"home__profile profile\">\n                    <Avatar \n                        className=\"profile__avatar\" \n                        avatarUrl={profileInfo.imgUrl} \n                    />\n                    <div className=\"profile__info\">\n    \n                    </div>\n                </div>\n                <div className=\"home__interaction interaction\">\n                    <div className=\"interaction__favourites\">\n                        {favouriteTeams.map(team => {\n                            return (\n                                <TeamCard \n                                    className=\"interaction__fav-card\" \n                                    taskDisplayTeam={this.taskDisplayTeam}\n                                    strTeamBadge={team.strTeamBadge}\n                                    teamId={team.idTeam} \n                                />\n                            )\n                        })} \n                    </div>\n                    <div className=\"interaction__feed-container\">\n                        <div className=\"interaction__feed feed\">\n    \n                        </div>\n                        {/* <div className=\"interaction__news news\">\n    \n                        </div> */}\n                    </div>\n                </div>\n                <div className=\"home__updates updates\">\n                    <div className=\"updates__container\">\n                        {pastEvents.map(event => {\n                            return <EventScore event={event} />\n                        })}\n                    </div>\n                    <div className=\"updates__container\">\n                        {articles.map(article => {\n                            return (\n                                <NewsArticle \n                                    className=\"team__news-article\" \n                                    newsArticle={article} \n                                />\n                            )\n                        })}\n                    </div>\n                </div>\n                <div className=\"home__friends friends\">\n                    <div className=\"friends__wrapper\">\n                        <div className=\"friends__container\">\n                            {/* {friends.map(friend => {\n                                return()\n                            })} */}\n                        </div>\n                        <div className=\"friends__container\">\n        \n                        </div>\n                    </div>\n                </div>\n                {detailsEnabled && \n                    <TeamDetails \n                        team={selectedTeam} \n                        taskEndDisplayTeam={this.taskEndDisplayTeam}\n                        taskUpdateFavourites={this.taskUpdateFavourites}\n                    />\n                }\n            </main>\n        )\n    }\n    \n}\n\nexport default HomePage;"]},"metadata":{},"sourceType":"module"}